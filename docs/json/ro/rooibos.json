{"gems":{"name":"rooibos","downloads":978,"version":"0.7.0","version_created_at":"2026-02-19T05:05:46.707Z","version_downloads":10,"platform":"ruby","authors":"Kerrick Long","info":"== Confidently Build Terminal Apps\n\nRooibos[https://rooibos.run] helps you build interactive terminal applications.\nKeep your code understandable and testable as it scales. Rooibos handles\nkeyboard, mouse, and async work so you can focus on behavior and user experience.\n\n  gem install rooibos\n\n<i>Currently in beta. APIs may change before 1.0.</i>\n\n=== Get Started in Seconds\n\n  rooibos new my_app\n  cd my_app\n  rooibos run\n\nThat's it. You have a working app with keyboard navigation, mouse support,\nand clickable buttons. Open <tt>lib/my_app.rb</tt> to make it your own.\n\n\n---\n\n=== The Pattern\n\n\\Rooibos uses Model-View-Update, the architecture behind\nElm[https://guide.elm-lang.org/architecture/],\nRedux[https://redux.js.org/], and {Bubble\nTea}[https://github.com/charmbracelet/bubbletea].\nState lives in one place. Updates flow in one direction. The runtime handles\nrendering and runs background work for you.\n\n---\n\n=== Hello, MVU\n\nThe simplest \\Rooibos app. Press any key to increment the counter. Press\n<tt>Ctrl</tt>+<tt>C</tt> to quit.\n\n  require \"rooibos\"\n\n  module Counter\n    # Init: How do you create the initial model?\n    Init = -> { 0 }\n \n    # View: What does the user see?\n    View = -> (model, tui) { tui.paragraph(text: <<~END) }\n      Current count: #{model}.\n      Press any key to increment.\n      Press Ctrl+C to quit.\n    END\n \n    # Update: What happens when things change?\n    Update = -> (message, model) {\n      if message.ctrl_c?\n        Rooibos::Command.exit\n      elsif message.key?\n        model + 1\n      end\n    }\n  end\n\n  Rooibos.run(Counter)\n\nThat's the whole pattern: Model holds state, Init creates it, View renders it,\nand Update changes it. The runtime handles everything else.\n\n\n---\n\n=== Your First Real Application\n\nA file browser in sixty lines. It opens files, navigates directories, handles\nerrors, styles directories and hidden files differently, and supports vim-style\nkeyboard shortcuts. If you can do this much with this little code, imagine how\neasy _your_ app will be to build.\n\n  require \"rooibos\"\n  \n  module FileBrowser\n    # Model: What state does your app need?\n    Model = Data.define(:path, :entries, :selected, :error)\n  \n    Init = -> {\n      path    = Dir.pwd\n      entries = Entries[path]\n      Ractor.make_shareable( # Ensures thread safety\n        Model.new(path:, entries:, selected: entries.first, error: nil))\n    }\n  \n    View = -> (model, tui) {\n      tui.block(\n        titles: [model.error || model.path,\n                 { content: KEYS, position: :bottom, alignment: :right}],\n        borders: [:all],\n        border_style: if model.error then tui.style(fg: :red) else nil end,\n        children: [tui.list(items: model.entries.map(&ListItem[model, tui]),\n                            selected_index: model.entries.index(model.selected),\n                            highlight_symbol: \"\",\n                            highlight_style: tui.style(modifiers: [:reversed]))]\n      )\n    }\n  \n    Update = -> (message, model) {\n      return model.with(error: ERROR) if message.error?\n      model = model.with(error: nil) if model.error && message.key?\n  \n      if message.ctrl_c? || message.q? then Rooibos::Command.exit\n      elsif message.home? || message.g? then model.with(selected: model.entries.first)\n      elsif message.end? || message.G? then model.with(selected: model.entries.last)\n      elsif message.up_arrow? || message.k? then Select[:-, model]\n      elsif message.down_arrow? || message.j? then Select[:+, model]\n      elsif message.enter? then Open[model]\n      elsif message.escape? then Navigate[File.dirname(model.path), model]\n      end\n    }\n  \n    private # Lines below this are implementation details\n  \n    KEYS  = \"↑/↓/Home/End: Select | Enter: Open | Esc: Navigate Up | q: Quit\"\n    ERROR = \"Sorry, opening the selected file failed.\"\n  \n    ListItem = -> (model, tui) { -> (name) {\n      modifiers = name.start_with?(\".\") ? [:dim] : []\n      fg        = :blue if name.end_with?(\"/\")\n      tui.list_item(content: name, style: tui.style(fg:, modifiers:))\n    } }\n  \n    Select = -> (operator, model) {\n      new_index = model.entries.index(model.selected).public_send(operator, 1)\n      model.with(selected: model.entries[new_index.clamp(0, model.entries.length - 1)])\n    }\n  \n    Open = -> (model) {\n      full = File.join(model.path, model.selected.delete_suffix(\"/\"))\n      model.selected.end_with?(\"/\") ? Navigate[full, model] : Rooibos::Command.open(full)\n    }\n  \n    Navigate = -> (path, model) {\n      entries = Entries[path]\n      model.with(path:, entries:, selected: entries.first, error: nil)\n    }\n  \n    Entries = -> (path) {\n      Dir.children(path).map { |name|\n        File.directory?(File.join(path, name)) ? \"#{name}/\" : name\n      }.sort_by { |name| [name.end_with?(\"/\") ? 0 : 1, name.downcase] }\n    }\n  end\n\n  Rooibos.run(FileBrowser)\n\n\n---\n\n=== Batteries Included\n\n==== Commands\n\nApplications fetch data, run shell commands, and set timers. \\Rooibos Commands\nrun off the main thread and send results back as messages.\n\n<b>HTTP requests:</b>\n\n  Update = -> (message, model) {\n    case message\n    in :fetch_users\n      [model.with(loading: true), Rooibos::Command.http(:get, \"/api/users\", :got_users)]\n    in { type: :http, envelope: :got_users, status: 200, body: }\n      model.with(loading: false, users: JSON.parse(body))\n    in { type: :http, envelope: :got_users, status: }\n      model.with(error: \"HTTP #{status}\")\n    end\n  }\n\n<b>Shell commands:</b>\n\n  Update = -> (message, model) {\n    case message\n    in :list_files\n      Rooibos::Command.system(\"ls -la\", :listed_files)\n    in { type: :system, envelope: :listed_files, stdout:, status: 0 }\n      model.with(files: stdout.lines.map(&:chomp))\n    in { type: :system, envelope: :listed_files, stderr:, status: }\n      model.with(error: stderr)\n    end\n  }\n\n<b>Timers:</b>\n\n  Update = -> (message, model) {\n    case message\n    in { type: :timer, envelope: :tick, elapsed: }\n      [model.with(frame: model.frame + 1), Rooibos::Command.wait(1.0 / 24, :tick)]\n    end\n  }\n\n<b>And more!</b> \\Rooibos includes <tt>all</tt>, <tt>batch</tt>, <tt>bubble</tt>,\n<tt>cancel</tt>, <tt>custom</tt>, <tt>deliver</tt>, <tt>exit</tt>,\n<tt>http</tt>, <tt>map</tt>, <tt>open</tt>, <tt>system</tt>, <tt>tick</tt>,\nand <tt>wait</tt> commands.  You can also define your own custom commands\nfor complex orchestration. \n\nEvery command produces a message, and Update handles it the same way.\n\n==== Testing\n\n\\Rooibos makes TUIs so easy to test, you'll save more time by writing tests than\nby not testing.\n\n<b>Unit test Update, View, and Init.</b> No terminal needed. Test helpers included.\n\n  def test_moves_selection_down_with_j\n    model = Ractor.make_shareable(FileBrowser::Model.new(\n      path: \"/\", entries: %w[bin exe lib], selected: \"bin\", error: nil))\n    message = RatatuiRuby::Event::Key.new(code: \"j\")\n\n    result = FileBrowser::Update.call(message, model)\n\n    assert_equal \"exe\", result.selected\n  end\n\n<b>Style assertions.</b> Draw to a headless terminal, verify colors and modifiers.\n\n  def test_directories_are_blue\n    with_test_terminal(60, 10) do\n      model = Ractor.make_shareable(FileBrowser::Model.new(\n        path: \"/\", entries: %w[file.txt subdir/], selected: \"file.txt\", error: nil))\n      widget = FileBrowser::View.call(model, RatatuiRuby::TUI.new)\n\n      RatatuiRuby.draw { |frame| frame.render_widget(widget, frame.area) }\n\n      assert_blue(1, 2) # \"subdir/\" at column 1, row 2\n    end\n  end\n\n<b>System tests.</b> Inject events, run the full app, snapshot the result.\n\n  def test_selection_moves_down\n    with_test_terminal(120, 30) do\n      Dir.mktmpdir do |dir|\n        FileUtils.touch(File.join(dir, \"a\"))\n        FileUtils.touch(File.join(dir, \"b\"))\n        FileUtils.touch(File.join(dir, \"c\"))\n\n        inject_key(:down)\n        inject_key(:ctrl_c)\n\n        # Tests use explicit params to inject deterministic initial state.\n        Rooibos.run(\n          model: Ractor.make_shareable(FileBrowser::Model.new(\n            path: dir, entries: %w[a b c], selected: \"a\", error: nil)),\n          view: FileBrowser::View,\n          update: FileBrowser::Update\n        )\n\n        assert_snapshots(\"selection_moved_down\") do |lines|\n          title = \"┌/tmp/test#{'─' * 107}┐\"\n          lines.map do |l|\n            l.gsub(/┌#{Regexp.escape(dir)}[^┐]*┐/, title)\n          end\n        end\n      end\n    end\n  end\n\nSnapshots record both plain text and ANSI colors. Normalization blocks mask\ndynamic content (timestamps, temp paths) for cross-platform reproducibility.\nRun <tt>UPDATE_SNAPSHOTS=1 rake test</tt> to regenerate baselines.\n\n==== Scale Up\n\nLarge applications decompose into fragments. Each fragment has its own Model,\nView, Update, and Init. Parents compose children. The pattern scales.\n\nThe Router DSL eliminates boilerplate:\n\n  module Dashboard\n    include Rooibos::Router\n\n    route :stats, to: StatsPanel\n    route :network, to: NetworkPanel\n\n    receive_events :ctrl_c, -> { Rooibos::Command.exit }\n\n    only when: -> (_message, model) { !model.modal_open } do\n      receive_events :q, -> { Rooibos::Command.exit }\n      forward_events :s, to: :stats, as: :fetch\n      forward_events :p, to: :network, as: :ping\n    end\n\n    Update = from_router\n\n    # ... Model, Init, View below\n  end\n\nDeclare routes and event handlers. The router generates Update for you. Use\nguards to ignore messages when needed.\n\n==== CLI\n\nThe <tt>rooibos</tt> command scaffolds projects and runs applications.\n\n  rooibos new my_app    # Generate project structure\n  rooibos run           # Run the app in current directory\n\nGenerated apps include tests, type signatures, and a working welcome\nscreen with keyboard and mouse support.\n\n\n---\n\n=== The Ecosystem\n\n\\Rooibos builds on RatatuiRuby[https://www.ratatui-ruby.dev], a Rubygem built on\nRatatui[https://ratatui.rs]. You get native performance with the joy of Ruby.\n\\Rooibos is one way to manage state and composition. Kit is another.\n\n==== Rooibos[https://www.rooibos.run]\n\nModel-View-Update architecture. Inspired by Elm, Bubble Tea, and React +\nRedux. Your UI is a pure function of state.\n\n- Functional programming with MVU\n- Commands work off the main thread\n- Messages, not callbacks, drive updates\n\n==== {Kit}[https://sr.ht/~kerrick/ratatui_ruby/#chapter-3-the-object-path--kit] (Coming Soon)\n\nComponent-based architecture. Encapsulate state, input handling, and\nrendering in reusable pieces.\n\n- OOP with stateful components\n- Separate UI state from domain logic\n- Built-in focus management & click handling\n\nBoth use the same widget library and rendering engine. Pick the paradigm\nthat fits your brain.\n\n\n---\n\n=== Links\n\n[Get Started]\n  {Getting Started}[https://www.rooibos.run/docs/trunk/doc/getting_started/index_md.html],\n  {Tutorial}[https://www.rooibos.run/docs/trunk/doc/tutorial/index_md.html],\n  {Examples}[https://www.rooibos.run/docs/trunk/examples/app_fractal_dashboard/README_md.html]\n\n[Coming From...]\n  {React/Redux}[https://www.rooibos.run/docs/trunk/doc/getting_started/for_react_developers_md.html],\n  {BubbleTea}[https://www.rooibos.run/docs/trunk/doc/getting_started/for_go_developers_md.html],\n  {Textual}[https://www.rooibos.run/docs/trunk/doc/getting_started/for_python_developers_md.html]\n\n[Learn More]\n  {Essentials}[https://www.rooibos.run/docs/trunk/doc/essentials/index_md.html],\n  {Scaling Up}[https://www.rooibos.run/docs/trunk/doc/scaling_up/index_md.html],\n  {Best Practices}[https://www.rooibos.run/docs/trunk/doc/best_practices/index_md.html],\n  {Troubleshooting}[https://www.rooibos.run/docs/trunk/doc/troubleshooting/index_md.html]\n\n[Community]\n  {Forum}[https://forum.setdef.com/c/rooibos],\n  {Announcements}[https://forum.setdef.com/tags/c/rooibos/announcement],\n  {Bug Tracker}[https://forum.setdef.com/tags/c/rooibos/bug],\n  {Contribution Guide}[https://github.com/setdef/Rooibos/blob/trunk/CONTRIBUTING.md],\n  {Code of Conduct}[https://github.com/setdef/Rooibos/blob/trunk/CODE_OF_CONDUCT.md]\n\n\n---\n\n[Website] https://rooibos.run\n[Source] https://github.com/setdef/Rooibos\n[RubyGems] https://rubygems.org/gems/rooibos\n\n© 2026 Kerrick Long · Library: LGPL-3.0-or-later · Website: CC-BY-NC-ND-4.0 · Snippets: MIT-0\n","licenses":["LGPL-3.0-or-later"],"metadata":{"homepage_uri":"https://rooibos.run","changelog_uri":"https://rooibos.run/docs/trunk/CHANGELOG_md.html","bug_tracker_uri":"https://forum.setdef.com/tags/c/rooibos/bug","source_code_uri":"https://github.com/setdef/Rooibos","mailing_list_uri":"https://forum.setdef.com/c/rooibos","allowed_push_host":"https://rubygems.org","documentation_uri":"https://rooibos.run/docs/","rubygems_mfa_required":"true"},"yanked":false,"sha":"539275134f23f91eba54d30ce63ae05c922edc4972dd286dc3dbb345a0f26719","spec_sha":"013ef07e5760b4cc919da4e09647fe43aca4eb78dda65d617a8fdfc8826475d5","project_uri":"https://rubygems.org/gems/rooibos","gem_uri":"https://rubygems.org/gems/rooibos-0.7.0.gem","homepage_uri":"https://rooibos.run","wiki_uri":null,"documentation_uri":"https://rooibos.run/docs/","mailing_list_uri":"https://forum.setdef.com/c/rooibos","source_code_uri":"https://github.com/setdef/Rooibos","bug_tracker_uri":"https://forum.setdef.com/tags/c/rooibos/bug","changelog_uri":"https://rooibos.run/docs/trunk/CHANGELOG_md.html","funding_uri":null,"dependencies":{"development":[{"name":"debug","requirements":">= 1.0"},{"name":"faker","requirements":"~> 3.5"},{"name":"minitest-mock","requirements":">= 0"},{"name":"rdoc","requirements":"~> 7.0"},{"name":"steep","requirements":">= 0"}],"runtime":[{"name":"concurrent-ruby","requirements":"~> 1.3"},{"name":"concurrent-ruby-edge","requirements":"~> 0.7"},{"name":"ostruct","requirements":"~> 0.6"},{"name":"ratatui_ruby","requirements":"~> 1.4"}]}},"vcs_name":"GitHub","ci":1,"github_actions":1,"vcs_uri":"https://github.com/setdef/Rooibos"}