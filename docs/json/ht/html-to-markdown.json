{"gems":{"name":"html-to-markdown","downloads":639,"version":"2.5.6","version_created_at":"2025-10-29T21:13:21.477Z","version_downloads":34,"platform":"ruby","authors":"Na'aman Hirschfeld","info":"# html-to-markdown-rb\n\nBlazing-fast HTML → Markdown conversion for Ruby, powered by the same Rust engine used by our Python, Node.js, and WebAssembly packages. Ship identical Markdown across every runtime while enjoying native extension performance.\n\n[![Crates.io](https://img.shields.io/crates/v/html-to-markdown-rs.svg)](https://crates.io/crates/html-to-markdown-rs)\n[![npm version](https://badge.fury.io/js/html-to-markdown-node.svg)](https://www.npmjs.com/package/html-to-markdown-node)\n[![PyPI version](https://badge.fury.io/py/html-to-markdown.svg)](https://pypi.org/project/html-to-markdown/)\n[![Gem Version](https://badge.fury.io/rb/html-to-markdown.svg)](https://rubygems.org/gems/html-to-markdown)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://github.com/Goldziher/html-to-markdown/blob/main/LICENSE)\n\n## Features\n\n- ⚡ **Rust-fast**: Ruby bindings around a highly optimised Rust core (60‑80× faster than BeautifulSoup-based converters).\n- 🔁 **Identical output**: Shares logic with the Python wheels, npm bindings, WASM package, and CLI — consistent Markdown everywhere.\n- ⚙️ **Rich configuration**: Control heading styles, list indentation, whitespace handling, HTML preprocessing, and more.\n- 🖼️ **Inline image extraction**: Pull out embedded images (PNG/JPEG/SVG/data URIs) alongside Markdown.\n- 🧰 **Bundled CLI proxy**: Call the Rust CLI straight from Ruby or shell scripts.\n- 🛠️ **First-class Rails support**: Works with `Gem.win_platform?` builds, supports Trusted Publishing, and compiles on install if no native gem matches.\n\n## Documentation & Support\n\n- [GitHub repository](https://github.com/Goldziher/html-to-markdown)\n- [Issue tracker](https://github.com/Goldziher/html-to-markdown/issues)\n- [Changelog](https://github.com/Goldziher/html-to-markdown/blob/main/CHANGELOG.md)\n- [Live demo (WASM)](https://goldziher.github.io/html-to-markdown/)\n\n## Installation\n\n```bash\nbundle add html-to-markdown\n# or\ngem install html-to-markdown\n```\n\nAdd the gem to your project and Bundler will compile the native Rust extension on first install.\n\n### Requirements\n\n- Ruby **3.2+** (Magnus relies on the fiber scheduler APIs added in 3.2)\n- Rust toolchain **1.85+** with Cargo available on your `$PATH`\n- Ruby development headers (`ruby-dev`, `ruby-devel`, or the platform equivalent)\n\n**Windows**: install [RubyInstaller with MSYS2](https://rubyinstaller.org/) (UCRT64). Run once:\n\n```powershell\nridk exec pacman -S --needed --noconfirm base-devel mingw-w64-ucrt-x86_64-toolchain\n```\n\nThis provides the standard headers (including `strings.h`) required for the bindgen step.\n\n## Performance Snapshot\n\nApple M4 • Real Wikipedia documents • `HtmlToMarkdown.convert` (Ruby)\n\n| Document            | Size  | Latency | Throughput | Docs/sec |\n| ------------------- | ----- | ------- | ---------- | -------- |\n| Lists (Timeline)    | 129KB | 0.69ms  | 187 MB/s   | 1,450    |\n| Tables (Countries)  | 360KB | 2.19ms  | 164 MB/s   | 456      |\n| Mixed (Python wiki) | 656KB | 4.88ms  | 134 MB/s   | 205      |\n\n> Same core, same benchmarks: the Ruby extension stays within single-digit % of the Rust CLI and mirrors the Python/Node numbers.\n\n## Quick Start\n\n```ruby\nrequire 'html_to_markdown'\n\nhtml = <<~HTML\n  <h1>Welcome</h1>\n  <p>This is <strong>Rust-fast</strong> conversion!</p>\n  <ul>\n    <li>Native extension</li>\n    <li>Identical output across languages</li>\n  </ul>\nHTML\n\nmarkdown = HtmlToMarkdown.convert(html)\nputs markdown\n# # Welcome\n#\n# This is **Rust-fast** conversion!\n#\n# - Native extension\n# - Identical output across languages\n```\n\n## API\n\n### Conversion Options\n\nPass a Ruby hash (string or symbol keys) to tweak rendering. Every option maps one-for-one with the Rust/Python/Node APIs.\n\n```ruby\nrequire 'html_to_markdown'\n\nmarkdown = HtmlToMarkdown.convert(\n  '<pre><code class=\"language-ruby\">puts \"hi\"</code></pre>',\n  heading_style: :atx,\n  code_block_style: :fenced,\n  bullets: '*+-',\n  list_indent_type: :spaces,\n  list_indent_width: 2,\n  whitespace_mode: :normalized,\n  highlight_style: :double_equal\n)\n\nputs markdown\n```\n\n### HTML Preprocessing\n\nClean up scraped HTML (navigation, forms, malformed markup) before conversion:\n\n```ruby\nrequire 'html_to_markdown'\n\nmarkdown = HtmlToMarkdown.convert(\n  html,\n  preprocessing: {\n    enabled: true,\n    preset: :aggressive, # :minimal, :standard, :aggressive\n    remove_navigation: true,\n    remove_forms: true\n  }\n)\n```\n\n### Inline Images\n\nExtract inline binary data (data URIs, SVG) together with the converted Markdown.\n\n```ruby\nrequire 'html_to_markdown'\n\nresult = HtmlToMarkdown.convert_with_inline_images(\n  '<img src=\"data:image/png;base64,iVBORw0...\" alt=\"Pixel\">',\n  image_config: {\n    max_decoded_size_bytes: 1 * 1024 * 1024,\n    infer_dimensions: true,\n    filename_prefix: 'img_',\n    capture_svg: true\n  }\n)\n\nputs result.markdown\nresult.inline_images.each do |img|\n  puts \"#{img.filename} -> #{img.format} (#{img.data.bytesize} bytes)\"\nend\n```\n\n## CLI\n\nThe gem bundles a small proxy for the Rust CLI binary. Use it when you need parity with the standalone `html-to-markdown` executable.\n\n```ruby\nrequire 'html_to_markdown/cli'\n\nHtmlToMarkdown::CLI.run(%w[--heading-style atx input.html], stdout: $stdout)\n# => writes converted Markdown to STDOUT\n```\n\nYou can also call the CLI binary directly for scripting:\n\n```ruby\nHtmlToMarkdown::CLIProxy.call(['--version'])\n# => \"html-to-markdown 2.5.6\"\n```\n\nRebuild the CLI locally if you see `CLI binary not built` during tests:\n\n```bash\nbundle exec rake compile          # builds the extension\nbundle exec ruby scripts/prepare_ruby_gem.rb  # copies the CLI into lib/bin/\n```\n\n## Error Handling\n\nConversion errors raise `HtmlToMarkdown::Error` (wrapping the Rust error context). CLI invocations use specialised subclasses:\n\n- `HtmlToMarkdown::CLIProxy::MissingBinaryError`\n- `HtmlToMarkdown::CLIProxy::CLIExecutionError`\n\nRescue them to provide clearer feedback in your application.\n\n## Consistent Across Languages\n\nThe Ruby gem shares the exact Rust core with:\n\n- [Python wheels](https://pypi.org/project/html-to-markdown/)\n- [Node.js / Bun bindings](https://www.npmjs.com/package/html-to-markdown-node)\n- [WebAssembly package](https://www.npmjs.com/package/html-to-markdown-wasm)\n- The Rust crate and CLI\n\nUse whichever runtime fits your stack while keeping formatting behaviour identical.\n\n## Development\n\n```bash\nbundle exec rake compile   # build the native extension\nbundle exec rspec          # run test suite\n```\n\nThe extension uses [Magnus](https://github.com/matsadler/magnus) plus `rb-sys` for bindgen. When editing the Rust code under `src/`, rerun `rake compile`.\n\n## License\n\nMIT © Na'aman Hirschfeld\n","licenses":["MIT"],"metadata":{"homepage_uri":"https://github.com/Goldziher/html-to-markdown","changelog_uri":"https://github.com/Goldziher/html-to-markdown/releases","bug_tracker_uri":"https://github.com/Goldziher/html-to-markdown/issues","source_code_uri":"https://github.com/Goldziher/html-to-markdown","documentation_uri":"https://github.com/Goldziher/html-to-markdown/blob/main/crates/html-to-markdown-rb/README.md","rubygems_mfa_required":"true"},"yanked":false,"sha":"d2f1cde38f4a14e021cb12e58b75bd58eb4c69f70d31a6fac20231b7df6c33fe","spec_sha":"5ad4fea99882024b5148a906defebbda1680825478ce24eaf82e64a20093b730","project_uri":"https://rubygems.org/gems/html-to-markdown","gem_uri":"https://rubygems.org/gems/html-to-markdown-2.5.6.gem","homepage_uri":"https://github.com/Goldziher/html-to-markdown","wiki_uri":null,"documentation_uri":"https://github.com/Goldziher/html-to-markdown/blob/main/crates/html-to-markdown-rb/README.md","mailing_list_uri":null,"source_code_uri":"https://github.com/Goldziher/html-to-markdown","bug_tracker_uri":"https://github.com/Goldziher/html-to-markdown/issues","changelog_uri":"https://github.com/Goldziher/html-to-markdown/releases","funding_uri":null,"dependencies":{"development":[],"runtime":[{"name":"rb_sys","requirements":">= 0.9, < 1.0"}]}},"vcs_name":"GitHub","ci":1,"github_actions":1,"vcs_uri":"https://github.com/Goldziher/html-to-markdown"}